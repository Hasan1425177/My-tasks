<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to right, #667eea, #764ba2);
      color: #333;
      margin: 0;
      padding: 0;
      direction: rtl;
    }

    .container {
      max-width: 800px;
      margin: 50px auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .task-form {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    input[type="text"], input[type="date"], input[type="time"], select {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
    }

    button {
      background-color: #28c76f;
      color: white;
      border: none;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #20a45f;
    }

    .filter-btn {
      background-color: #ff8c00;
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px;
      transition: background-color 0.3s;
    }

    .filter-btn:hover {
      background-color: #e57b00;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    table th, table td {
      border: 1px solid #ccc;
      padding: 12px;
      text-align: center;
    }

    table th {
      background-color: #f0f0f0;
    }

    .done-row {
      background-color: #d4ffd4;
      text-decoration: line-through;
    }

    .actions span {
      cursor: pointer;
      margin: 0 5px;
      font-size: 18px;
    }

    .log {
      margin-top: 30px;
      background: #eef;
      padding: 15px;
      border-radius: 8px;
    }

    .log h3 {
      margin-top: 0;
    }

    .log ul {
      padding: 0;
      list-style: none;
    }

    .log li {
      font-size: 14px;
      margin-bottom: 5px;
    }

    .ai-link {
      display: block;
      text-align: center;
      background-color: #28c76f;
      color: white;
      padding: 10px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 30px;
      text-decoration: none;
    }

    .ai-link:hover {
      background-color: #20a45f;
    }

    /* Ø²Ø± Ø§Ù„Ù„ØºØ© */
    .lang-btn {
      background-color: #ff6347;
      color: white;
      border: none;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      position: absolute;
      top: 10px;
      left: 20px;
    }

    .lang-btn:hover {
      background-color: #e5533c;
    }

    /* ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© */
    .previous-tasks-btn {
      text-align: center;
      background-color: #ff8c00;
      color: white;
      padding: 12px 18px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 30px;
      text-decoration: none;
      display: block;
    }

    .previous-tasks-btn:hover {
      background-color: #e57b00;
    }

    .previous-tasks {
      display: none;
      margin-top: 30px;
    }

  </style>
</head>
<body>

  <div class="container">
    <!-- Ø²Ø± Ø§Ù„Ù„ØºØ© -->
    <button class="lang-btn" onclick="toggleLanguage()" id="langBtn">EN</button>

    <div class="header">
      <h1 id="appTitle">ğŸ“‹ Ù…Ù‡Ø§Ù…ÙŠ</h1>
    </div>

    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© -->
    <div class="task-form">
      <input type="text" id="taskInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©...">
      <input type="date" id="taskDate">
      <input type="time" id="taskTime">
      <select id="taskCategory">
        <option value="...<"...</option>
        <option value="Ù…Ù†Ø²Ù„ÙŠ">Ù…Ù†Ø²Ù„ÙŠ</option>
        <option value="Ø¹Ù…Ù„">Ø¹Ù…Ù„</option>
        <option value="Ø±ÙŠØ§Ø¶ÙŠ">Ø±ÙŠØ§Ø¶ÙŠ</option>
        <option value="ØºÙŠØ± Ø°Ù„Ùƒ">ØºÙŠØ± Ø°Ù„Ùƒ</option>
      </select>
      <button onclick="addTask()" id="addButton">â• Ø¥Ø¶Ø§ÙØ©</button>
    </div>

    <!-- Ø§Ù„ÙÙ„Ø§ØªØ± -->
    <div class="filters">
      <button class="filter-btn filter-completed" onclick="filterTasks('completed')" id="filterCompleted">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ù†Ø¬Ø²Ø©</button>
      <button class="filter-btn filter-pending" onclick="filterTasks('pending')" id="filterPending">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</button>
      <button class="filter-btn filter-all" onclick="filterTasks('all')" id="filterAll">ÙƒÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…</button>
    </div>

    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… -->
    <table>
      <thead>
        <tr>
          <th id="taskNameHeader">Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©</th>
          <th id="taskDateHeader">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù‡Ù…Ø©</th>
          <th id="taskTimeHeader">ÙˆÙ‚Øª Ø§Ù„Ù…Ù‡Ù…Ø©</th>
          <th id="taskCategoryHeader">Ø§Ù„ØªØµÙ†ÙŠÙ</th>
          <th id="taskStatusHeader">Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th id="taskActionsHeader">Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</th>
        </tr>
      </thead>
      <tbody id="taskTableBody"></tbody>
    </table>

    <div class="log">
      <h3 id="logTitle">ğŸ“ Ø³Ø¬Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…</h3>
      <ul id="logList"></ul>
    </div>

    <!-- Ø²Ø± Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ -->
    <a href="javascript:void(0);" onclick="openChatWindow()" class="ai-link" id="chatBtn">Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</a>

    <!-- Ø²Ø± Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© -->
    <a href="javascript:void(0);" onclick="togglePreviousTasks()" class="previous-tasks-btn" id="previousTasksBtn">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</a>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© -->
    <div class="previous-tasks" id="previousTasks">
      <h3 id="previousTasksTitle">Ø§Ù„Ù€Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h3>
      <table>
        <thead>
          <tr>
            <th id="previousTaskNameHeader">Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©</th>
            <th id="previousTaskDateHeader">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù‡Ù…Ø©</th>
            <th id="previousTaskTimeHeader">ÙˆÙ‚Øª Ø§Ù„Ù…Ù‡Ù…Ø©</th>
            <th id="previousTaskCategoryHeader">Ø§Ù„ØªØµÙ†ÙŠÙ</th>
            <th id="previousTaskStatusHeader">Ø§Ù„Ø­Ø§Ù„Ø©</th>
          </tr>
        </thead>
        <tbody id="previousTasksBody"></tbody>
      </table>
    </div>
  </div>

  <script>
    const taskInput = document.getElementById('taskInput');
    const taskDate = document.getElementById('taskDate');
    const taskTime = document.getElementById('taskTime');
    const taskCategory = document.getElementById('taskCategory');
    const taskTableBody = document.getElementById('taskTableBody');
    const logList = document.getElementById('logList');
    const langBtn = document.getElementById('langBtn');
    const appTitle = document.getElementById('appTitle');
    const taskNameHeader = document.getElementById('taskNameHeader');
    const taskDateHeader = document.getElementById('taskDateHeader');
    const taskTimeHeader = document.getElementById('taskTimeHeader');
    const taskCategoryHeader = document.getElementById('taskCategoryHeader');
    const taskStatusHeader = document.getElementById('taskStatusHeader');
    const taskActionsHeader = document.getElementById('taskActionsHeader');
    const logTitle = document.getElementById('logTitle');
    const chatBtn = document.getElementById('chatBtn');
    const previousTasksBtn = document.getElementById('previousTasksBtn');
    const previousTasksTitle = document.getElementById('previousTasksTitle');
    const previousTaskNameHeader = document.getElementById('previousTaskNameHeader');
    const previousTaskDateHeader = document.getElementById('previousTaskDateHeader');
    const previousTaskTimeHeader = document.getElementById('previousTaskTimeHeader');
    const previousTaskCategoryHeader = document.getElementById('previousTaskCategoryHeader');
    const previousTaskStatusHeader = document.getElementById('previousTaskStatusHeader');
    const addButton = document.getElementById('addButton');
    const filterCompleted = document.getElementById('filterCompleted');
    const filterPending = document.getElementById('filterPending');
    const filterAll = document.getElementById('filterAll');

    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    let previousTasksList = JSON.parse(localStorage.getItem('previousTasks')) || [];
    let currentLanguage = 'ar';

    function renderTasks() {
      taskTableBody.innerHTML = '';
      logList.innerHTML = '';
      tasks.forEach((task, index) => {
        const row = document.createElement('tr');
        if (task.done) row.classList.add('done-row');

        row.innerHTML = `
          <td>${task.text}</td>
          <td>${task.date || 'â€”'}</td>
          <td>${task.time || 'â€”'}</td>
          <td>${task.category}</td>
          <td>${task.done ? 'âœ… Ù…Ù†Ø¬Ø²Ø©' : 'âŒ ØºÙŠØ± Ù…Ù†Ø¬Ø²Ø©'}</td>
          <td class="actions">
            <span title="ØªØ£Ø´ÙŠØ± ÙƒÙ…ÙƒØªÙ…Ù„Ø©" onclick="toggleDone(${index})">âœ…</span>
            <span title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©" onclick="editTask(${index})">âœï¸</span>
            <span title="Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©" onclick="deleteTask(${index})">ğŸ—‘ï¸</span>
          </td>
        `;
        taskTableBody.appendChild(row);

        const logItem = document.createElement('li');
        logItem.textContent = `${task.text} - ${task.date || 'Ø¨Ø¯ÙˆÙ† ØªØ§Ø±ÙŠØ®'} - ${task.done ? 'âœ… Ù…Ù†Ø¬Ø²Ø©' : 'âŒ ØºÙŠØ± Ù…Ù†Ø¬Ø²Ø©'}`;
        logList.appendChild(logItem);
      });

      saveTasks();
    }

    function addTask() {
      const text = taskInput.value.trim();
      const date = taskDate.value;
      const time = taskTime.value;
      const category = taskCategory.value;

      if (text === '') {
        alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©');
        return;
      }

      tasks.push({ text, date, time, category, done: false });
      taskInput.value = '';
      taskDate.value = '';
      taskTime.value = '';
      renderTasks();
    }

    function toggleDone(index) {
      tasks[index].done = !tasks[index].done;
      renderTasks();
    }

    function deleteTask(index) {
      if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) {
        tasks.splice(index, 1);
        renderTasks();
      }
    }

    function saveTasks() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    function openChatWindow() {
      window.open('https://chat.openai.com', '_blank');
    }

    function togglePreviousTasks() {
      previousTasks.style.display = previousTasks.style.display === 'none' ? 'block' : 'none';
      renderPreviousTasks();
    }

    function renderPreviousTasks() {
      previousTasksBody.innerHTML = '';
      tasks.forEach((task, index) => {
        const taskDate = new Date(task.date + ' ' + task.time);
        const now = new Date();
        const diffTime = now - taskDate;
        const twentyFourHours = 24 * 60 * 60 * 1000; // 24 hours in milliseconds

        if (diffTime > twentyFourHours) {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${task.text}</td>
            <td>${task.date}</td>
            <td>${task.time}</td>
            <td>${task.category}</td>
            <td>${task.done ? 'âœ… Ù…Ù†Ø¬Ø²Ø©' : 'âŒ ØºÙŠØ± Ù…Ù†Ø¬Ø²Ø©'}</td>
          `;
          previousTasksBody.appendChild(row);
          previousTasksList.push(task);
          tasks.splice(index, 1);
        }
      });

      saveTasks();
      savePreviousTasks();
    }

    function savePreviousTasks() {
      localStorage.setItem('previousTasks', JSON.stringify(previousTasksList));
    }

    function filterTasks(status) {
      let filteredTasks = tasks;

      if (status === 'completed') {
        filteredTasks = tasks.filter(task => task.done);
      } else if (status === 'pending') {
        filteredTasks = tasks.filter(task => !task.done);
      }

      taskTableBody.innerHTML = '';
      filteredTasks.forEach(task => {
        const row = document.createElement('tr');
        if (task.done) row.classList.add('done-row');

        row.innerHTML = `
          <td>${task.text}</td>
          <td>${task.date || 'â€”'}</td>
          <td>${task.time || 'â€”'}</td>
          <td>${task.category}</td>
          <td>${task.done ? 'âœ… Ù…Ù†Ø¬Ø²Ø©' : 'âŒ ØºÙŠØ± Ù…Ù†Ø¬Ø²Ø©'}</td>
          <td class="actions">
            <span title="ØªØ£Ø´ÙŠØ± ÙƒÙ…ÙƒØªÙ…Ù„Ø©" onclick="toggleDone(${task.index})">âœ…</span>
            <span title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø©" onclick="editTask(${task.index})">âœï¸</span>
            <span title="Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©" onclick="deleteTask(${task.index})">ğŸ—‘ï¸</span>
          </td>
        `;
        taskTableBody.appendChild(row);
      });
    }

    function toggleLanguage() {
      if (currentLanguage === 'ar') {
        currentLanguage = 'en';
        document.body.dir = 'ltr';
        langBtn.textContent = "AR";

        // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†ØµÙˆØµ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        appTitle.textContent = "ğŸ“‹ My Tasks";
        taskNameHeader.textContent = "Task Name";
        taskDateHeader.textContent = "Task Date";
        taskTimeHeader.textContent = "Task Time";
        taskCategoryHeader.textContent = "Category";
        taskStatusHeader.textContent = "Status";
        taskActionsHeader.textContent = "Actions";
        logTitle.textContent = "ğŸ“ Task Log";
        chatBtn.textContent = "Start AI Chat";
        previousTasksBtn.textContent = "Show Previous Tasks";
        previousTasksTitle.textContent = "Previous Tasks";
        filterCompleted.textContent = "Completed Tasks";
        filterPending.textContent = "Pending Tasks";
        filterAll.textContent = "All Tasks";
        addButton.textContent = "â• Add Task";
      } else {
        currentLanguage = 'ar';
        document.body.dir = 'rtl';
        langBtn.textContent = "EN";

        // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†ØµÙˆØµ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        appTitle.textContent = "ğŸ“‹ Ù…Ù‡Ø§Ù…ÙŠ";
        taskNameHeader.textContent = "Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©";
        taskDateHeader.textContent = "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ù‡Ù…Ø©";
        taskTimeHeader.textContent = "ÙˆÙ‚Øª Ø§Ù„Ù…Ù‡Ù…Ø©";
        taskCategoryHeader.textContent = "Ø§Ù„ØªØµÙ†ÙŠÙ";
        taskStatusHeader.textContent = "Ø§Ù„Ø­Ø§Ù„Ø©";
        taskActionsHeader.textContent = "Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª";
        logTitle.textContent = "ğŸ“ Ø³Ø¬Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…";
        chatBtn.textContent = "Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ";
        previousTasksBtn.textContent = "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©";
        previousTasksTitle.textContent = "Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©";
        filterCompleted.textContent = "Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ù†Ø¬Ø²Ø©";
        filterPending.textContent = "Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©";
        filterAll.textContent = "ÙƒÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…";
        addButton.textContent = "â• Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©";
      }
    }

    renderTasks();
  </script>
</body>
</html>
